import random
import urllib.request
proxies_pool = [
    {"http":"127.0.0.1:7890"},
    {"http":"127.0.0.1:7891"},
    {"http":"127.0.0.1:7892"},
]

proxies = random.choice(proxies_pool)
url = "https://www.baidu.com/s?wd=ip"
headers = {
    'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 Safari/537.36 Edg/118.0.2088.46',
    "Cookie":"newlogin=1; BIDUPSID=96A829FEC1E945E26B80F419125966FA; PSTM=1697088103; BD_UPN=12314753; BAIDUID=0B95F954D8142D2E44FABDFD98F3EB93:FG=1; MCITY=-218%3A; BDUSS=l-RUJSYUFHejJuSGRpc0NIaGVzV29Rd3EzeXA1MTZ4ak9CLVEza3d0NURlVTlsSVFBQUFBJCQAAAAAAQAAAAEAAAB~00YrAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEPsJ2VD7CdlME; BDUSS_BFESS=l-RUJSYUFHejJuSGRpc0NIaGVzV29Rd3EzeXA1MTZ4ak9CLVEza3d0NURlVTlsSVFBQUFBJCQAAAAAAQAAAAEAAAB~00YrAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEPsJ2VD7CdlME; BAIDUID_BFESS=0B95F954D8142D2E44FABDFD98F3EB93:FG=1; BA_HECTOR=058k20a48h0g8021a50h2k2d1ij275m1p; ZFY=MJFIwNiB7tul6dBrZX8K5ZPOmO:AhPAov:AT9v201zTtw:C; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; COOKIE_SESSION=2565_0_4_7_7_15_1_1_2_4_0_1_4061_0_0_0_1697704578_0_1697704578%7C9%230_2_1697159056%7C1; delPer=0; BD_CK_SAM=1; PSINO=6; H_PS_PSSID=39315_38831_39396_39419_39435_39526_39495_39497_39478_39233_26350_39427; sugstore=0; H_PS_645EC=a6b3%2FMYd%2FRZEvlYq63ac3qYAKGsBOo6fBMNnMx1GMK00rW43Kq3vsdiXKvc; baikeVisitId=18bd500b-7dfc-48fc-a16d-c883972f7328"
}
request = urllib.request.Request(url=url,headers=headers)
handler = urllib.request.ProxyHandler(proxies = proxies)
opener = urllib.request.build_opener(handler)
response = opener.open(request)
content = response.read().decode("utf-8")
with open("./test/daili1.html","w",encoding="utf-8") as fp:
    fp.write(content)
